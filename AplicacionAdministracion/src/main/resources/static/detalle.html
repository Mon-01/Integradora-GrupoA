<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Detalle del empleado en cuestión</title>
</head>
<body>
    <h1>Detalle del Empleado</h1>

    <!-- div vacío que contendrá el detalle del empleado-->

    <div id="contenido-empleado"></div>

    <script>
        //con location obtenemos la url actual, mientras que
        // con search obtenemos la parte de los parámetros
        const params = new URLSearchParams(window.location.search);
        //bucamos el id del empleado entre los parámetros
        const empleadoId = params.get("id");

        if (!empleadoId) {
            document.getElementById("contenido-empleado").innerText = "ID de empleado no especificado en la URL.";
        } else {
            //accedemos al controlador que llama al servicio de empleado para usar el metodo "obtenerPorId"
            fetch(`/api/admin/${empleadoId}`)
                .then(response => {
                    //si la respuesta del navegador es diferente de 200 lanza el error
                    if (!response.ok) throw new Error("Empleado no encontrado");
                    //en caso contrario adapta el json a js para poder usarlo
                    return response.json();
                })
                //cada then obtiene la información que devuelve el then anterior
                .then(data => {
                    const container = document.getElementById("contenido-empleado");
                    container.innerHTML = `
                        <p><strong>Nombre:</strong> ${data.nombre} ${data.apellido}</p>
                        <p><strong>Email:</strong> ${data.email}</p>
                        <p><strong>Teléfono:</strong> ${data.prefijoTel} ${data.telefono}</p>
                        <p><strong>Fecha Nacimiento: </strong> ${data.fecha_nacimiento}</p>
                    `;
                })
                .catch(error => {
                    document.getElementById("contenido-empleado").innerText = "error al obtener el empleado";
                });
        }
    </script>
</body>
</html>